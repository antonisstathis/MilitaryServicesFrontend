(function(){"use strict";var e={6586:function(e,o,t){var n=t(5130),r=t(6768);function i(e,o,t,n,i,a){const s=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.Wv)(s)}var a={name:"App",components:{}},s=t(1241);const l=(0,s.A)(a,[["render",i]]);var c=l,u=t(1387),d=t(4232);const p={class:"login-container"},h={key:0,class:"error-message"};function m(e,o,t,i,a,s){return(0,r.uX)(),(0,r.CE)("div",p,[o[4]||(o[4]=(0,r.Lk)("h1",null,"Login",-1)),a.errorMessage?((0,r.uX)(),(0,r.CE)("div",h,(0,d.v_)(a.errorMessage),1)):(0,r.Q3)("",!0),(0,r.Lk)("form",{onSubmit:o[2]||(o[2]=(0,n.D$)(((...e)=>s.login&&s.login(...e)),["prevent"]))},[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>a.username=e),placeholder:"Username",required:""},null,512),[[n.Jo,a.username]]),(0,r.bo)((0,r.Lk)("input",{type:"password","onUpdate:modelValue":o[1]||(o[1]=e=>a.password=e),placeholder:"Password",required:""},null,512),[[n.Jo,a.password]]),o[3]||(o[3]=(0,r.Lk)("button",{type:"submit"},"Login",-1))],32),o[5]||(o[5]=(0,r.Lk)("a",{href:"#"},"Forgot your password?",-1))])}t(4114);var f={name:"LoginPage",data(){return{username:"",password:"",jwtToken:"",errorMessage:""}},methods:{loginSuccessful(){this.jwtToken?(localStorage.setItem("jwtToken",this.jwtToken),this.$router.push("/home")):console.error("JWT Token token not found in response.")},async login(){try{this.errorMessage="";const e=await fetch(`${this.$config.backEndUrl}performLogin`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username,password:this.password,errorMessage:""})});if(401===e.status)this.errorMessage="Invalid username or password";else if(e.ok){const o=await e.json();this.jwtToken=o.token,this.loginSuccessful()}else this.errorMessage="An error occured. Please try again."}catch(e){console.error("Error:",e)}}}};const k=(0,s.A)(f,[["render",m],["__scopeId","data-v-543445e4"]]);var g=k;const v={id:"app"},b={class:"menu"},y={id:"header"},S={id:"table"},w=["onClick"];function L(e,o,t,n,i,a){const s=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",v,[(0,r.Lk)("nav",b,[(0,r.Lk)("ul",null,[(0,r.Lk)("li",null,[(0,r.bF)(s,{to:"/home"},{default:(0,r.k6)((()=>o[4]||(o[4]=[(0,r.eW)("Home")]))),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(s,{to:"/personnel"},{default:(0,r.k6)((()=>o[5]||(o[5]=[(0,r.eW)("Personnel")]))),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(s,{to:"/soldiers"},{default:(0,r.k6)((()=>o[6]||(o[6]=[(0,r.eW)("Soldiers")]))),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(s,{to:"/services"},{default:(0,r.k6)((()=>o[7]||(o[7]=[(0,r.eW)("Services")]))),_:1})])])]),(0,r.Lk)("div",y,[(0,r.Lk)("h1",null,(0,d.v_)(i.unitName),1),(0,r.Lk)("button",{class:"primary-btn",onClick:o[0]||(o[0]=(...e)=>a.newServices&&a.newServices(...e))},"New Services"),(0,r.Lk)("button",{class:"primary-btn",onClick:o[1]||(o[1]=e=>a.navigateTo("/soldierForm"))}," Add Soldier "),(0,r.Lk)("button",{class:"primary-btn",onClick:o[2]||(o[2]=e=>a.navigateTo("/home"))}," Services of Unit "),(0,r.Lk)("button",{class:"logout-btn",onClick:o[3]||(o[3]=(...e)=>a.logout&&a.logout(...e))},"Log Out")]),(0,r.Lk)("div",S,[(0,r.Lk)("table",null,[(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.tableHeaders.slice(1),(e=>((0,r.uX)(),(0,r.CE)("th",{key:e},(0,d.v_)(e),1)))),128))])]),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.soldiers,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id,onClick:o=>a.selectSoldier(e)},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.tableHeaders.slice(1),(o=>((0,r.uX)(),(0,r.CE)("td",{key:o},(0,d.v_)(e[o]),1)))),128))],8,w)))),128))])])])])}var T={data(){return{unitName:"",soldiers:[],tableHeaders:[]}},mounted(){this.getNameOfUnit()},methods:{async getNameOfUnit(){const e=(0,u.rd)(),o=localStorage.getItem("jwtToken");if(o)try{const t=await fetch(`${this.$config.backEndUrl}getNameOfUnit`,{method:"GET",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});t.ok||e.push("/signIn"),this.fetchSoldiers(),this.unitName=await t.text()}catch(t){console.error(t),alert(t)}else e.push("/signIn")},async fetchSoldiers(){const e=localStorage.getItem("jwtToken",this.jwtToken);try{const o=await fetch(`${this.$config.backEndUrl}getSoldiers`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),t=(0,u.rd)();o.ok||t.push("/signIn");const n=await o.json();n.length&&(this.tableHeaders=Object.keys(n[0]),this.soldiers=n)}catch(o){console.error(o),alert(o)}},async newServices(){const e=localStorage.getItem("jwtToken",this.jwtToken);try{const o=await fetch(`${this.$config.backEndUrl}calc`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),t=(0,u.rd)();o.ok||t.push("/signIn"),this.fetchSoldiers()}catch(o){console.error(o),alert(o)}},async selectSoldier(e){const o=localStorage.getItem("jwtToken",this.jwtToken);try{const t=await fetch(`${this.$config.backEndUrl}getSoldier`,{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(e)});t.ok||this.$router.push("/signIn");const n=await t.json();localStorage.setItem("formData",JSON.stringify(n)),this.$router.push("/soldierForm")}catch(t){console.error("Request failed:",t)}},logout(){localStorage.clear(),this.$router.push("/signIn")},navigateTo(e){this.$router.push(e)}}};const j=(0,s.A)(T,[["render",L],["__scopeId","data-v-56538fc2"]]);var I=j;const C={id:"background"},$={class:"add-container"};function E(e,o,t,i,a,s){return(0,r.uX)(),(0,r.CE)("div",C,[(0,r.Lk)("div",$,[o[10]||(o[10]=(0,r.Lk)("h1",null,"Add Soldier",-1)),(0,r.Lk)("form",{onSubmit:o[6]||(o[6]=(0,n.D$)(((...e)=>s.saveSoldier&&s.saveSoldier(...e)),["prevent"]))},[(0,r.bo)((0,r.Lk)("input",{type:"hidden","onUpdate:modelValue":o[0]||(o[0]=e=>a.soldier.id=e),placeholder:"Id",disabled:""},null,512),[[n.Jo,a.soldier.id]]),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=e=>a.soldier.name=e),placeholder:"Name",required:""},null,512),[[n.Jo,a.soldier.name]]),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=e=>a.soldier.surname=e),placeholder:"Surname",required:""},null,512),[[n.Jo,a.soldier.surname]]),(0,r.bo)((0,r.Lk)("select",{id:"situationSelect","onUpdate:modelValue":o[3]||(o[3]=e=>a.soldier.situation=e)},o[7]||(o[7]=[(0,r.Lk)("option",{value:"",disabled:"",selected:""},"Select an option",-1),(0,r.Lk)("option",{value:"option1"},"ένοπλος",-1),(0,r.Lk)("option",{value:"option2"},"άοπλος",-1)]),512),[[n.u1,a.soldier.situation]]),(0,r.bo)((0,r.Lk)("select",{id:"activeSelect","onUpdate:modelValue":o[4]||(o[4]=e=>a.soldier.active=e)},o[8]||(o[8]=[(0,r.Lk)("option",{value:"",disabled:"",selected:""},"Select an option",-1),(0,r.Lk)("option",{value:"option1"},"ενεργός",-1),(0,r.Lk)("option",{value:"option2"},"ΕΥ",-1)]),512),[[n.u1,a.soldier.active]]),o[9]||(o[9]=(0,r.Lk)("button",{type:"submit"},"Save",-1)),(0,r.Lk)("button",{onClick:o[5]||(o[5]=(...e)=>s.goToSoldierForm&&s.goToSoldierForm(...e)),class:"back-btn"},"Back")],32)])])}var O={data(){return{soldier:{id:"",name:"",surname:"",situation:"",active:""}}},mounted(){const e=(0,u.rd)(),o=localStorage.getItem("jwtToken");if(!o)return void e.push("/signIn");const t=localStorage.getItem("formData");t&&(this.soldier=JSON.parse(t),localStorage.removeItem("formData"))},methods:{async saveSoldier(){try{await fetch(`${this.$config.backEndUrl}save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.soldier)});const e=(0,u.rd)();e.push("/home")}catch(e){console.error("Request failed:",e)}},goToSoldierForm(){this.$router.push("/home")}}};const _=(0,s.A)(O,[["render",E],["__scopeId","data-v-615079b3"]]);var U=_;const F=(0,u.aE)({history:(0,u.LA)("/"),routes:[{path:"/home",name:"home",component:I},{path:"/signIn",name:"signIn",component:g},{path:"/soldierForm",name:"soldierForm",component:U},{path:"/:pathMatch(.*)*",redirect:"/home"}]});var A=F;const N={backEndUrl:"http://localhost:8080/"},J=(0,n.Ef)(c);J.use(A),J.config.globalProperties.$config=N,J.mount("#app")}},o={};function t(n){var r=o[n];if(void 0!==r)return r.exports;var i=o[n]={exports:{}};return e[n].call(i.exports,i,i.exports,t),i.exports}t.m=e,function(){var e=[];t.O=function(o,n,r,i){if(!n){var a=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],i=e[u][2];for(var s=!0,l=0;l<n.length;l++)(!1&i||a>=i)&&Object.keys(t.O).every((function(e){return t.O[e](n[l])}))?n.splice(l--,1):(s=!1,i<a&&(a=i));if(s){e.splice(u--,1);var c=r();void 0!==c&&(o=c)}}return o}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,r,i]}}(),function(){t.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(o,{a:o}),o}}(),function(){t.d=function(e,o){for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){var e={524:0};t.O.j=function(o){return 0===e[o]};var o=function(o,n){var r,i,a=n[0],s=n[1],l=n[2],c=0;if(a.some((function(o){return 0!==e[o]}))){for(r in s)t.o(s,r)&&(t.m[r]=s[r]);if(l)var u=l(t)}for(o&&o(n);c<a.length;c++)i=a[c],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(u)},n=self["webpackChunkweb_app_militaryservices_11"]=self["webpackChunkweb_app_militaryservices_11"]||[];n.forEach(o.bind(null,0)),n.push=o.bind(null,n.push.bind(n))}();var n=t.O(void 0,[504],(function(){return t(6586)}));n=t.O(n)})();
//# sourceMappingURL=app.ea4957f0.js.map