(function(){"use strict";var e={1524:function(e,t,o){var n=o(5130),r=o(6768);function a(e,t,o,n,a,s){const i=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.Wv)(i)}var s={name:"App",components:{}},i=o(1241);const l=(0,i.A)(s,[["render",a]]);var c=l,u=o(1387),d=o(4232);const h={class:"login-container"},p={key:0,class:"error-message"};function g(e,t,o,a,s,i){return(0,r.uX)(),(0,r.CE)("div",h,[t[4]||(t[4]=(0,r.Lk)("h1",null,"Login",-1)),s.errorMessage?((0,r.uX)(),(0,r.CE)("div",p,(0,d.v_)(s.errorMessage),1)):(0,r.Q3)("",!0),(0,r.Lk)("form",{onSubmit:t[2]||(t[2]=(0,n.D$)(((...e)=>i.login&&i.login(...e)),["prevent"]))},[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>s.username=e),placeholder:"Username",required:""},null,512),[[n.Jo,s.username]]),(0,r.bo)((0,r.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>s.password=e),placeholder:"Password",required:""},null,512),[[n.Jo,s.password]]),t[3]||(t[3]=(0,r.Lk)("button",{type:"submit"},"Login",-1))],32),t[5]||(t[5]=(0,r.Lk)("a",{href:"#"},"Forgot your password?",-1))])}o(4114);var v=o(4373),f={name:"LoginPage",data(){return{username:"",password:"",jwtToken:"",errorMessage:""}},methods:{loginSuccessful(){this.jwtToken?(localStorage.setItem("jwtToken",this.jwtToken),this.$router.push("/home")):console.error("JWT Token token not found in response.")},async login(){try{this.errorMessage="";const e=await v.A.post(`${this.$config.backEndUrl}performLogin`,{username:this.username,password:this.password},{headers:{"Content-Type":"application/json"}});if(200===e.status){const t=e.data;this.jwtToken=t.token,this.loginSuccessful()}else this.errorMessage="An error occurred. Please try again."}catch(e){console.error("Login error:",e),e.response&&401===e.response.status?this.errorMessage="Invalid username or password":this.errorMessage="An error occurred. Please try again."}}}};const m=(0,i.A)(f,[["render",g],["__scopeId","data-v-1743ae3a"]]);var k=m;o(8111),o(2489);const b={id:"app"},y={class:"menu"},S={id:"header"},L={class:"lang-wrapper"},w={id:"table"},$=["title"],T=["onClick"];function I(e,t,o,a,s,i){const l=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",b,[(0,r.Lk)("nav",y,[(0,r.Lk)("ul",null,[(0,r.Lk)("li",null,[(0,r.bF)(l,{to:"/home"},{default:(0,r.k6)((()=>[(0,r.eW)((0,d.v_)(s.titles.homelabel),1)])),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(l,{to:"/personnel"},{default:(0,r.k6)((()=>[(0,r.eW)((0,d.v_)(s.titles.personnellabel),1)])),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(l,{to:"/soldiers"},{default:(0,r.k6)((()=>[(0,r.eW)((0,d.v_)(s.titles.soldierslabel),1)])),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(l,{to:"/servicesOfUnit"},{default:(0,r.k6)((()=>[(0,r.eW)((0,d.v_)(s.titles.serviceslabel),1)])),_:1})])])]),(0,r.Lk)("div",S,[(0,r.Lk)("h1",null,(0,d.v_)(s.unitName),1),(0,r.Lk)("div",L,[(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.locale=t),onChange:t[1]||(t[1]=(...e)=>i.changeLanguage&&i.changeLanguage(...e)),class:"lang-select"},t[7]||(t[7]=[(0,r.Lk)("option",{value:"en"},"ðŸ‡¬ðŸ‡§ English",-1),(0,r.Lk)("option",{value:"el"},"ðŸ‡¬ðŸ‡· Î•Î»Î»Î·Î½Î¹ÎºÎ¬",-1)]),544),[[n.u1,e.locale]])]),(0,r.Lk)("button",{class:"primary-btn",onClick:t[2]||(t[2]=(...e)=>i.newServices&&i.newServices(...e))},(0,d.v_)(s.titles.newservicesbutton),1),(0,r.Lk)("button",{class:"primary-btn",onClick:t[3]||(t[3]=e=>i.navigateTo("/servicesOfUnit"))},(0,d.v_)(s.titles.servicesofunitbutton),1),(0,r.Lk)("button",{class:"primary-btn",onClick:t[4]||(t[4]=(...e)=>i.fetchSoldiers&&i.fetchSoldiers(...e))},(0,d.v_)(s.titles.lastservicesbutton),1),(0,r.Lk)("input",{type:"date",id:"date",onChange:t[5]||(t[5]=e=>i.fetchPrevCalculation(e))},null,32),(0,r.Lk)("button",{class:"logout-btn",onClick:t[6]||(t[6]=(...e)=>i.logout&&i.logout(...e))},(0,d.v_)(s.titles.logoutbutton),1)]),(0,r.Lk)("div",w,[(0,r.Lk)("table",null,[(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.tableHeaders,((e,t)=>((0,r.uX)(),(0,r.CE)("th",{key:t,title:e},(0,d.v_)(e),9,$)))),128))])]),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.soldiers,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.token,onClick:t=>i.selectSoldier(e)},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(Object.entries(e).filter((([e])=>"token"!==e)),(([e,t])=>((0,r.uX)(),(0,r.CE)("td",{key:e},(0,d.v_)(t),1)))),128))],8,T)))),128))])])])])}var C={data(){return{unitName:"",soldiers:[],tableHeaders:[],titles:{}}},mounted(){this.getNameOfUnit(),this.fetchSoldiers(),this.fetchElementTitles()},methods:{changeLanguage(){localStorage.setItem("lang",this.locale),this.fetchSoldiers(),this.fetchElementTitles()},async fetchElementTitles(){const e=localStorage.getItem("jwtToken"),t=localStorage.getItem("lang")||"en";if(e)try{const o=await v.A.get(`${this.$config.backEndUrl}titles`,{params:{lang:t},headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});this.titles=o.data,console.log(this.titles)}catch(o){if(console.error(o),o.response&&401===o.response.status)return void this.$router.push("/signIn")}else this.$router.push("/signIn")},async getNameOfUnit(){const e=localStorage.getItem("jwtToken");if(e)try{const t=await v.A.get(`${this.$config.backEndUrl}getNameOfUnit`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});this.unitName=t.data}catch(t){if(console.error(t),t.response&&401===t.response.status)return void this.$router.push("/signIn")}else this.$router.push("/signIn")},async fetchTableTitles(e){const t=localStorage.getItem("jwtToken"),o=localStorage.getItem("lang")||"en";this.locale=o;try{const n=await v.A.get(`${this.$config.backEndUrl}mtable`,{params:{prefix:e,lang:o},headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),r=n.data;r.length&&(this.tableHeaders=r)}catch(n){if(console.error(n),n.response&&401===n.response.status)return void this.$router.push("/signIn");alert(n)}},async fetchSoldiers(){await this.fetchTableTitles("title.lastcalc");const e=localStorage.getItem("jwtToken");try{const t=localStorage.getItem("lang"),o=await v.A.get(`${this.$config.backEndUrl}getSoldiers`,{params:{lang:t},headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),n=o.data;n.length&&(this.soldiers=Object.values(n));const r=this.soldiers[0].date,a=r.split("-").reverse().join("-"),s=new Date(a);document.getElementById("date").value=s.toISOString().split("T")[0]}catch(t){if(console.error(t),t.response&&401===t.response.status)return void this.$router.push("/signIn");alert(t)}},async fetchPrevCalculation(e){const t=localStorage.getItem("lang");await this.fetchTableTitles("title.prevcalc");const o=e.target.value,n=localStorage.getItem("jwtToken");try{const e=await v.A.get(`${this.$config.backEndUrl}getPreviousCalculation`,{params:{date:o,lang:t},headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}}),r=e.data;r.length&&(this.soldiers=Object.values(r))}catch(r){if(console.error(r),r.response&&401===r.response.status)return void this.$router.push("/signIn");alert(r)}},async newServices(){const e=localStorage.getItem("jwtToken");try{await v.A.get(`${this.$config.backEndUrl}calc`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),this.fetchSoldiers()}catch(t){if(console.error(t),t.response&&401===t.response.status)return void this.$router.push("/signIn");alert(t)}},async selectSoldier(e){const t=localStorage.getItem("jwtToken");try{const o=await v.A.post(`${this.$config.backEndUrl}getSoldier`,e,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),n=o.data;localStorage.setItem("formData",JSON.stringify(n)),this.$router.push("/soldierForm")}catch(o){if(console.error("Request failed:",o),o.response&&401===o.response.status)return void this.$router.push("/signIn")}},logout(){localStorage.clear(),this.$router.push("/signIn")},navigateTo(e){this.$router.push(e)}}};const j=(0,i.A)(C,[["render",I],["__scopeId","data-v-58b97978"]]);var E=j;const _={id:"background"},U={class:"add-container"};function A(e,t,o,a,s,i){return(0,r.uX)(),(0,r.CE)("div",_,[(0,r.Lk)("div",U,[t[10]||(t[10]=(0,r.Lk)("h1",null,"Add Soldier",-1)),(0,r.Lk)("form",{onSubmit:t[6]||(t[6]=(0,n.D$)(((...e)=>i.saveSoldier&&i.saveSoldier(...e)),["prevent"]))},[(0,r.bo)((0,r.Lk)("input",{type:"hidden","onUpdate:modelValue":t[0]||(t[0]=e=>s.soldier.id=e),placeholder:"Id",disabled:""},null,512),[[n.Jo,s.soldier.id]]),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>s.soldier.name=e),placeholder:"Name",readonly:"",required:""},null,512),[[n.Jo,s.soldier.name]]),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>s.soldier.surname=e),placeholder:"Surname",readonly:"",required:""},null,512),[[n.Jo,s.soldier.surname]]),(0,r.bo)((0,r.Lk)("select",{id:"situationSelect","onUpdate:modelValue":t[3]||(t[3]=e=>s.soldier.situation=e)},t[7]||(t[7]=[(0,r.Lk)("option",{value:"",disabled:"",selected:""},"Select an option",-1),(0,r.Lk)("option",{value:"armed"},"armed",-1),(0,r.Lk)("option",{value:"unarmed"},"unarmed",-1)]),512),[[n.u1,s.soldier.situation]]),(0,r.bo)((0,r.Lk)("select",{id:"activeSelect","onUpdate:modelValue":t[4]||(t[4]=e=>s.soldier.active=e)},t[8]||(t[8]=[(0,r.Lk)("option",{value:"",disabled:"",selected:""},"Select an option",-1),(0,r.Lk)("option",{value:"active"},"active",-1),(0,r.Lk)("option",{value:"free of duty"},"free of duty",-1)]),512),[[n.u1,s.soldier.active]]),t[9]||(t[9]=(0,r.Lk)("button",{type:"submit"},"Save",-1)),(0,r.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>i.goToSoldierForm&&i.goToSoldierForm(...e)),class:"back-btn"},"Back")],32)])])}var O={data(){return{soldier:{id:"",name:"",surname:"",situation:"",active:""}}},mounted(){const e=localStorage.getItem("jwtToken");if(!e)return void this.$router.push("/signIn");const t=localStorage.getItem("formData");t&&(this.soldier=JSON.parse(t),localStorage.removeItem("formData"))},methods:{async saveSoldier(){const e=localStorage.getItem("jwtToken");try{await v.A.post(`${this.$config.backEndUrl}changeSoldSituation`,this.soldier,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),this.goToSoldierForm()}catch(t){if(console.error(t),t.response&&401===t.response.status)return void this.$router.push("/signIn");alert(t)}},goToSoldierForm(){this.$router.push("/home")}}};const F=(0,i.A)(O,[["render",A],["__scopeId","data-v-a869b5d4"]]);var X=F;const N={id:"header"},B={id:"table"},P=["onClick"];function M(e,t,o,n,a,s){return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",N,[(0,r.Lk)("h1",null,(0,d.v_)(a.unitName),1),(0,r.Lk)("button",{class:"primary-btn",onClick:t[0]||(t[0]=e=>s.navigateTo("/home"))}," Add Services "),(0,r.Lk)("button",{class:"primary-btn",onClick:t[1]||(t[1]=(...t)=>e.deleteServices&&e.deleteServices(...t))},"Delete Services"),(0,r.Lk)("button",{class:"primary-btn",onClick:t[2]||(t[2]=e=>s.navigateTo("/home"))},"Back")]),(0,r.Lk)("div",B,[(0,r.Lk)("table",null,[(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.tableHeaders.slice(1),(e=>((0,r.uX)(),(0,r.CE)("th",{key:e},(0,d.v_)(e),1)))),128))])]),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.services,(t=>((0,r.uX)(),(0,r.CE)("tr",{key:t.id,onClick:o=>e.selectSoldier(t)},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.tableHeaders.slice(1),(e=>((0,r.uX)(),(0,r.CE)("td",{key:e},(0,d.v_)(t[e]),1)))),128))],8,P)))),128))])])])],64)}var z={data(){return{unitName:"",tableHeaders:[],services:[]}},mounted(){this.getNameOfUnit(),this.fetchServicesOfUnit()},methods:{async getNameOfUnit(){const e=localStorage.getItem("jwtToken");if(e)try{const t=await v.A.get(`${this.$config.backEndUrl}getNameOfUnit`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});this.unitName=await t.data}catch(t){if(console.error(t),t.response&&401===t.response.status)return void this.$router.push("/signIn");alert(t)}else this.$router.push("/signIn")},async fetchServicesOfUnit(){const e=localStorage.getItem("jwtToken",this.jwtToken);try{const t=await v.A.get(`${this.$config.backEndUrl}getServices`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),o=t.data;o.length&&(this.tableHeaders=Object.keys(o[0]),this.services=o)}catch(t){if(console.error(t),t.response&&401===t.response.status)return void this.$router.push("/signIn");alert(t)}},navigateTo(e){this.$router.push(e)}}};const x=(0,i.A)(z,[["render",M],["__scopeId","data-v-775314c2"]]);var J=x;const V=(0,u.aE)({history:(0,u.LA)("/"),routes:[{path:"/home",name:"home",component:E},{path:"/signIn",name:"signIn",component:k},{path:"/soldierForm",name:"soldierForm",component:X},{path:"/servicesOfUnit",name:"servicesOfUnit",component:J},{path:"/:pathMatch(.*)*",redirect:"/home"}]});var D=V;const H={backEndUrl:"http://localhost:8080/"},K=(0,n.Ef)(c);K.use(D),K.config.globalProperties.$config=H,K.mount("#app")}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,o),a.exports}o.m=e,function(){var e=[];o.O=function(t,n,r,a){if(!n){var s=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],a=e[u][2];for(var i=!0,l=0;l<n.length;l++)(!1&a||s>=a)&&Object.keys(o.O).every((function(e){return o.O[e](n[l])}))?n.splice(l--,1):(i=!1,a<s&&(s=a));if(i){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,r,a]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,a,s=n[0],i=n[1],l=n[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(r in i)o.o(i,r)&&(o.m[r]=i[r]);if(l)var u=l(o)}for(t&&t(n);c<s.length;c++)a=s[c],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(u)},n=self["webpackChunkweb_app_militaryservices_11"]=self["webpackChunkweb_app_militaryservices_11"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[504],(function(){return o(1524)}));n=o.O(n)})();
//# sourceMappingURL=app.b52226a0.js.map